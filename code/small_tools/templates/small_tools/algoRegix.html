{% extends "admin_app/base.html" %}

{% block header %}
	<h2>正则表达式工具  <small>(上传一个文本文件或输入一个字符串)</small></h2>
{% endblock header %}

{% block content %}

	<form class="form-horizontal" role="form">
		{% csrf_token %}

		<div class="form-group">
			<label class="col-sm-2 control-label">上传一个文件</label>
			<div class="col-sm-2">
				<input type="file" id="fileUpload" name="fileUpload" accept="text/plain, application/msword">
			</div>
		</div>

		<div class="form-group">
			<label for="strInput" class="col-sm-2 control-label">待检索字符串</label>
			<div class="col-sm-10">
				<textarea class="form-control" id="strInput" rows="6"
						  style="background:#FFFFFF; color:#000000; font-size:11pt"
						  placeholder="请输入一个字符串"></textarea>
			</div>
		</div>

		<div class="form-group">
			<label for="regixInput" class="col-sm-2 control-label">正则表达式</label>
			<div class="col-sm-10">
				<textarea class="form-control" id="regixInput" rows="2"
						  style="background:#FFFFFF; color:#000000; font-size:11pt"
						  placeholder="请输入正则表达式"></textarea>
			</div>
		</div>

		<div class="form-group">
			<label for="strOutput" class="col-sm-2 control-label">输出</label>
			<div class="col-sm-10">
				<textarea class="form-control" id="strOutput" rows="6"
						  style="background:#DCDCDC; color:#000000; font-size:11pt"
						  placeholder="等待输出结果" readonly="true"></textarea>
			</div>
		</div>

		<div class="form-group">
			<div class="col-sm-offset-2 col-sm-10">
				<button type="button" class="btn btn-primary" id="btn">开始计算</button>
			</div>
		</div>
	</form>

	<script>

		$(document).ready(function (){

			$("#btn").click(function (){
				//if(undefined == fileUpload){
				//	alert('你没有选中任何文件');
				//	return false;
				//}
				$.ajax({	//提交ajax请求
					url: "{% url 'small_tools:algoRegix' %}",
					type: 'POST',
					data: {
						"fileUpload" : $('#fileUpload')[0].files[0],
						"csrfmiddlewaretoken" : $("[name='csrfmiddlewaretoken']").val(),
					},
					processDate: false,		//tell jquery not to process the data
					contentType: false,		//tell jquery not to set contentType
					success: function(data) {
						//$('#strOutput').text(data);
						if(data)
							alert(data);
					}
				});
			});
		});
	</script>
	
{% endblock content %}
